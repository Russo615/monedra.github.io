<!DOCTYPE html>
<html>
<head>
  <title>Assinar Mensagem</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
  <h2>Assinar Mensagem (MetaMask)</h2>
  <textarea id="message" rows="6" cols="60" placeholder="Cole aqui a mensagem da BscScan"></textarea><br>
  <button onclick="signMessage()">Assinar</button>
  <p>Assinatura:</p>
  <textarea id="signature" rows="5" cols="60" readonly></textarea>

  <script>
    async function signMessage() {
      if (typeof window.ethereum === 'undefined') {
        alert('MetaMask não encontrada!');
        return;
      }
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const account = accounts[0];
      const message = document.getElementById('message').value;

      const from = account;
      const msg = `0x${Buffer.from(message, 'utf8').toString('hex')}`;

      const params = [msg, from];
      const method = 'personal_sign';

      try {
        const signature = await ethereum.request({ method, params });
        document.getElementById('signature').value = signature;
      } catch (err) {
        alert('Erro ao assinar: ' + err.message);
      }
    }
  </script>
</body>
</html><!DOCTYPE html>
<html>
<head>
  <title>Assinar Mensagem</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</head>
<body>
  <h2>Assinar Mensagem (MetaMask)</h2>
  <textarea id="message" rows="6" cols="60" placeholder="Cole aqui a mensagem da BscScan"></textarea><br>
  <button onclick="signMessage()">Assinar</button>
  <p>Assinatura:</p>
  <textarea id="signature" rows="5" cols="60" readonly></textarea>

  <script>
    async function signMessage() {
      if (typeof window.ethereum === 'undefined') {
        alert('MetaMask não encontrada!');
        return;
      }
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const account = accounts[0];
      const message = document.getElementById('message').value;

      const from = account;
      const msg = `0x${Buffer.from(message, 'utf8').toString('hex')}`;

      const params = [msg, from];
      const method = 'personal_sign';

      try {
        const signature = await ethereum.request({ method, params });
        document.getElementById('signature').value = signature;
      } catch (err) {
        alert('Erro ao assinar: ' + err.message);
      }
    }
  </script>
</body>
</html>
